**멀티홉(Multi‑Hop)**

* 이더넷 네트워크에서 **패킷이 송신지→목적지**로 가는 과정에 **여러 스위치(Switch)나 브리지(Bridge)를 거치는** 경로를 말합니다.
* 예를 들어, 자율주행 차량 내부 네트워크에서는

  1. 카메라 센서 → 스위치 A
  2. 스위치 A → 스위치 B
  3. 스위치 B → ECU(전자제어장치)
     와 같이 **3회 이상 홉(Hop)** 을 거칠 수 있습니다.

---

## TAS가 멀티홉에서 중요한 이유

1. **End‑to‑End 지연 바운드 예측**

   * Prio나 BE 방식은 홉마다 큐잉 지연이 달라져서, 홉 수가 늘어날수록 **최대 지연(worst‑case latency)** 을 정확히 예측하기 어려워집니다.
   * TAS는 각 홉에서 **동일한 Gate Control List(GCL)** 를 **PTP(1588)로 시간 동기**하여 적용하기 때문에, 각 스위치별로 ‘언제만 열고 언제 닫는다’가 **일관되게 유지**됩니다.
   * 결과적으로 송신지부터 최종 목적지까지 **End‑to‑End 지연 최대값**을 나노초 단위로 **미리 계산·보장**할 수 있습니다.

2. **지터(Jitter) 최소화**

   * 홉이 늘어나면 홉마다 큐잉 지연 변화가 더해져 **지터**가 커지지만,
   * TAS는 **시간 슬롯** 기반 스케줄링으로 패킷이 항상 정해진 시간에만 나가므로, 홉이 많아져도 지터가 거의 누적되지 않습니다.

3. **혼합 트래픽 격리**

   * 자율주행 시스템엔 **센서 데이터(실시간)→제어 메시지(하드 리얼타임)→인포테인먼트(대역폭 많이 쓰는 BE)** 가 섞여 있습니다.
   * TAS로 **하드 리얼타임** 트래픽 전용 슬롯을 확보하고, 나머지 트래픽은 그 외 시간에만 통과시켜 줌으로써,

     * **실시간 제어 메시지**는 멀티홉 전 구간에서 지연·지터 없이 항상 우선 전달
     * **인포테인먼트** 트래픽은 백그라운드로 밀어 안정적 대역폭 활용

---

## 자율주행에서의 활용 시나리오

| 요구사항              | Prio only  | TAS 적용                    |
| ----------------- | ---------- | ------------------------- |
| **센서→제어지연 보장**    | 홉마다 변동 심함  | End‑to‑End 최대 지연 엄격 보장    |
| **긴급제어 패킷 지터 억제** | 제한적        | 나노초 단위 지터 최소화             |
| **복수 클래스 트래픽 격리** | 우선순위 경쟁 발생 | 하드웨어 GCL로 클래스별 완전 격리      |
| **PTP 동기화 활용**    | 사용 안 함     | TAS와 PTP 연동해 차량 전체 동기화 가능 |

* 예) **라이다→ECU 제동 명령** 경로에서 5홉을 거치더라도, TAS 스케줄에 따라 “20 µs 안에” 꼭 전달되도록 설계 가능
* 예) **긴급 제동 신호**는 1 µs 슬롯에만 통과, 나머지 시스템 부하에 상관없이 항상 낮은 지연 보장

---

### 결론

자율주행 차량처럼 **안정적·예측 가능한 실시간 통신**이 필수적인 환경에서는,

* 단순 우선순위(802.1p Prio) 만으로는 홉 수 증가에 따른 지연·지터 누적을 완전히 막기 어렵고,
* TAS(802.1Qbv)를 통해 **시간 기반 하드웨어 스케줄링**을 하면,

  * 멀티홉 전 구간에서 **결정론적(Deterministic) 서비스**를 실현할 수 있습니다.
