<!DOCTYPE html>

<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Intel i210/i225v TSN TAS 평가</title>
  <style>
    body { font-family: Georgia, serif; line-height:1.6; margin:2em; max-width:800px; }
    header { text-align:center; margin-bottom:2em; }
    h1 { font-size:2em; margin-bottom:0; }
    h2 { margin-top:1.5em; border-bottom:1px solid #ccc; padding-bottom:0.2em; }
    h3 { margin-top:1em; }
    img { max-width:100%; margin:1em 0; }
    .toc { background:#f9f9f9; padding:1em; border:1px solid #ddd; }
    .search { float:right; margin-top:-2.5em; }
    .section { margin-bottom:2em; }
    table { width:100%; border-collapse:collapse; margin:1em 0; }
    table, th, td { border:1px solid #bbb; }
    th, td { padding:0.5em; text-align:center; }
    footer { text-align:center; margin-top:3em; font-size:0.9em; color:#666; }
    .hidden { display:none; }
    pre { background:#f4f4f4; padding:0.5em; overflow-x:auto; }
  </style>
</head>
<body>

  <header>
    <h1>Intel i210/i225v 기반 TSN TAS 성능 평가</h1>
    <p><em>hwkim3330</em></p>
    <div class="search">
      <input type="text" id="searchBox" placeholder="검색..." oninput="filterSections()" />
    </div>
  </header>

  <nav class="toc">
    <strong>목차</strong>
    <ul>
      <li><a href="#abstract">초록</a></li>
      <li><a href="#introduction">소개</a></li>
      <li><a href="#methods">실험 방법</a></li>
      <li><a href="#results">결과</a>
        <ul>
          <li><a href="#result_tas">TAS 성능 분석</a></li>
          <li><a href="#result_prio">Prio vs No-TAS 비교</a></li>
        </ul>
      </li>
      <li><a href="#conclusion">결론</a></li>
      <li><a href="#references">참고문헌</a></li>
    </ul>
  </nav>

  <section id="abstract" class="section">
    <h2>초록</h2>
    <p>이 논문은 Intel i210 및 i225v NIC에서 IEEE 802.1Qbv TAS(Time‑Aware Shaper)를 Linux tc taprio를 통해 적용하고, Payload‑timestamp 방식을 사용하여 실제 지연(latency)을 정밀 측정한 결과를 보고합니다. 2 µs 및 10 µs 사이클에서의 지연 분포와 통계치를 제시하여 TSN 환경에서의 스케줄링 정확도를 검증했습니다.</p>
  </section>

  <section id="introduction" class="section">
    <h2>소개</h2>
    <p>Time‑Sensitive Networking(TSN)은 산업용, 오디오/비디오, 자율주행 등 실시간성이 중요한 애플리케이션을 위해 Ethernet 상에서 데이터 전송의 지연과 지터를 보장합니다. 802.1Qbv TAS는 하드웨어 큐 레벨에서 전송 슬롯을 제어하여 결정론적 스케줄링을 제공합니다.</p>
    <p>본 연구에서는 Intel i210(i82576 기반)과 i225v 칩셋을 이용하여 TAS를 구현하고, 실제 패킷 지연을 Payload‑timestamp 방식으로 측정·분석합니다.</p>
  </section>

  <section id="methods" class="section">
    <h2>실험 방법</h2>
    <h3>1. 실험 장비 및 설정</h3>
    <ul>
      <li>송신기: Intel i210 NIC (네임스페이스 ns1, IP 169.254.59.170/16)</li>
      <li>수신기: Intel i225v NIC (네임스페이스 ns2, IP 169.254.59.100/16)</li>
      <li>OS: Ubuntu 22.04, Kernel 5.10+</li>
      <li>툴: <code>iproute2</code>, <code>ethtool</code>, <code>tc</code> (taprio), <code>hping3</code>, <code>tcpdump</code>, Python 3.8+</li>
    </ul>
    <h3>2. TAS 스케줄</h3>
    <p>두 가지 GCL(Gate Control List)을 사용:</p>
    <table>
      <tr><th>사이클</th><th>Open</th><th>Close</th></tr>
      <tr><td>2 µs</td><td>1 µs</td><td>1 µs</td></tr>
      <tr><td>10 µs</td><td>5 µs</td><td>5 µs</td></tr>
    </table>
    <h3>3. 측정 방법</h3>
    <ol>
      <li><strong>Payload‑timestamp</strong> 송신: Python 스크립트로 <code>time.time_ns()</code>를 UDP 페이로드에 기록</li>
      <li>수신 시각 – 송신 시각 = 실측 지연</li>
      <li>3회 반복 토글(각 10초 유지) → 60초간 데이터 수집</li>
      <li>CSV로 저장 후 Python 분석 스크립트 실행</li>
    </ol>
  </section>

  <section id="results" class="section">
    <h2>결과</h2>
    <section id="result_tas">
      <h3>TAS 성능 분석</h3>
      <p>본 실험에서는 Intel i210 및 i225v NIC에 TAS(Time-Aware Shaper)를 적용하여 지연 분포와 안정성을 분석했습니다. TAS 적용 유무에 따른 성능 차이를 확인하기 위해 No-TAS(FIFO) 모드와도 비교했습니다.</p>
     
      <h4>1. Scatter Plot (Payload-TS)</h4>
      <p><strong>그림 1. 2 µs 사이클 산점도 / 그림 2. 10 µs 사이클 산점도</strong></p>
      <img width="1728" height="700" alt="image" src="https://github.com/user-attachments/assets/db60d5d4-befc-432f-bbca-2065525e44eb" />
      <p>TAS 스케줄에 따라 <strong>열린 슬롯</strong> 내에서만 패킷이 전송되었음을 확인할 수 있습니다. 2 µs 사이클에서는 0–2000 ns 구간에, 10 µs 사이클에서는 0–10000 ns 구간에 점들이 집중적으로 분포합니다.</p>
     
      <h4>2. Latency Histogram & CDF (Idle)</h4>
      <p><strong>그림 3. TAS 모드 무부하 히스토그램 / 그림 4. TAS 모드 무부하 CDF</strong></p>
      <img width="1840" height="699" alt="image" src="https://github.com/user-attachments/assets/7575a7db-ee1d-1baa-96a0-25d6cfd7aab9" />
      <ul>
        <li>평균 지연: ≈ 19.7 µs</li>
        <li>P95 지연: ≈ 33.9 µs</li>
        <li>P99 지연: ≈ 52.2 µs</li>
      </ul>
      <p>슬롯 대기 시간으로 인해 평균 지연은 다소 증가하지만, 슬롯 외 지터는 최소화되었습니다.</p>
     
      <h4>3. TAS vs No-TAS 요약 통계 (무부하)</h4>
      <table>
        <thead>
          <tr>
            <th>Mode</th>
            <th>Count</th>
            <th>Mean (ns)</th>
            <th>P50 (ns)</th>
            <th>P95 (ns)</th>
            <th>P99 (ns)</th>
            <th>Max (ns)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>TAS</strong></td>
            <td>20000</td>
            <td>20572.2</td>
            <td>18994</td>
            <td>31535</td>
            <td>49808</td>
            <td>271800</td>
          </tr>
          <tr>
            <td><strong>No-TAS</strong></td>
            <td>20000</td>
            <td>19525.7</td>
            <td>18333</td>
            <td>29732</td>
            <td>50728</td>
            <td>186095</td>
          </tr>
        </tbody>
      </table>
     
      <p>무부하 환경에서는 TAS 모드의 평균 지연이 다소 높게 나타났으나, 이는 슬롯 대기 시간 때문입니다.</p>
     
      <h4>4. TAS vs No-TAS 지연 비교 (포화 부하)</h4>
      <p><code>iperf3</code>로 UDP 포화 트래픽(≈1 Gbps)을 발생시킨 상태에서 TAS와 No-TAS 모드의 지연을 비교했습니다.</p>
      <p><strong>그림 5. 포화 트래픽(1 Gbps) 하 TAS vs No-TAS 히스토그램</strong></p>
      <img width="1713" height="876" alt="image" src="https://github.com/user-attachments/assets/78d27af8-2e15-47d4-a3e9-38a13e8e9824" />
     
      <table>
        <thead>
          <tr>
            <th>Mode</th>
            <th>Count</th>
            <th>Mean (ns)</th>
            <th>P50 (ns)</th>
            <th>P95 (ns)</th>
            <th>P99 (ns)</th>
            <th>Max (ns)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>TAS</strong></td>
            <td>100000</td>
            <td>194215</td>
            <td>195354</td>
            <td>263367</td>
            <td>271173</td>
            <td>353343</td>
          </tr>
          <tr>
            <td><strong>No-TAS</strong></td>
            <td>100000</td>
            <td>598310</td>
            <td>597483</td>
            <td>873277</td>
            <td>939794</td>
            <td>1060900</td>
          </tr>
        </tbody>
      </table>
      <p>포화 부하 환경에서 TAS 모드는 평균 지연 ≈ 194 µs, P99 ≈ 271 µs로 지연을 안정적으로 제어했습니다. 반면, No-TAS 모드는 평균 지연 ≈ 598 µs, P99 ≈ 940 µs로 큐잉 지연이 급격히 증가했습니다.</p>
    </section>
   
    <section id="result_prio">
      <h3>Prio (802.1p) vs No-TAS 우선순위 실험 결과</h3>
      <p>TAS가 아닌, 802.1p 우선순위(Prio) 스케줄러를 적용하여 포화 트래픽 환경에서의 지연을 비교했습니다.</p>
     
      <h4>1. 지연(latency) 비교</h4>
      <table>
        <thead>
          <tr>
            <th>Mode</th>
            <th>Count</th>
            <th>Mean (ns)</th>
            <th>P50 (ns)</th>
            <th>P95 (ns)</th>
            <th>P99 (ns)</th>
            <th>Max (ns)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Prio</strong></td>
            <td>100000</td>
            <td>7981.3</td>
            <td>6989</td>
            <td>10924</td>
            <td>15679</td>
            <td>89602</td>
          </tr>
          <tr>
            <td><strong>No-TAS</strong></td>
            <td>100000</td>
            <td>598310</td>
            <td>597483</td>
            <td>873277</td>
            <td>939794</td>
            <td>1060900</td>
          </tr>
        </tbody>
      </table>
     
      <p>포화 부하에서 Prio 모드는 평균 지연 약 7.98 µs, P99 약 15.7 µs를 기록했습니다. 이는 No-TAS 모드의 평균 지연(598.3 µs) 대비 수십 배 낮은 수치입니다.</p>
     
      <h4>2. 히스토그램</h4>
      <p><strong>그림. 포화 상태에서 Prio(파란) vs No-TAS(주황) 지연 분포 비교</strong></p>
      <img width="1015" height="665" alt="image" src="https://github.com/user-attachments/assets/8565b986-b105-434d-900e-635c410501e3" />
      <p>Prio 모드는 대부분의 지연이 0–20 µs 구간에 집중되어 매우 안정적인 분포를 보입니다. 반면, No-TAS는 지연 분포가 매우 넓고 극단적인 값이 다수 관찰되었습니다.</p>
    </section>
  </section>
 
  <section id="conclusion" class="section">
    <h2>결론</h2>
    <ul>
      <li>TAS 적용 시, 슬롯 제어를 통해 지연 분포가 좁고 예측 가능해집니다.</li>
      <li>무부하에서는 슬롯 대기 시간으로 인해 평균 지연이 소폭 증가하지만, 포화 부하 환경에서는 지연 안정성이 크게 향상됩니다.</li>
      <li>802.1p Prio 방식만으로도 포화 트래픽에서 FIFO 대비 응답성을 크게 개선할 수 있어, TAS가 아니더라도 실용적인 대안이 될 수 있습니다.</li>
      <li>TSN 기반 실시간 시스템에서 결정론적 보장을 위해 TAS는 필수적인 기능임을 입증합니다.</li>
    </ul>
  </section>

  <section id="references" class="section">
    <h2>참고문헌</h2>
    <ol>
      <li>IEEE Std 802.1Qbv-2015, “Enhancements for Scheduled Traffic,” IEEE.</li>
      <li>“TC taprio: Time-Aware Priority Scheduler,” Linux Foundation Documentation.</li>
      <li>Intel Ethernet Controllers i210, i225 Series Datasheet.</li>
    </ol>
  </section>

  <footer>
    © 2025 hwkim3330 – MIT License  
  </footer>

  <script>
    function filterSections() {
      const query = document.getElementById('searchBox').value.toLowerCase();
      document.querySelectorAll('.section').forEach(sec => {
        const text = sec.innerText.toLowerCase();
        sec.classList.toggle('hidden', query && !text.includes(query));
      });
    }
  </script>

</body>
</html>
